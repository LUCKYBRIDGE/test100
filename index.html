<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆë“± ì˜ì–´ í€´ì¦ˆ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- html2canvas for image saving -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        /* ì»¤ìŠ¤í…€ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translate3d(0, 20px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ (Lucide React ëŒ€ì²´) ---
        const Star = ({ size = 24, className = "", fill = "none" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );

        const CheckCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const RefreshCcw = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 2v6h-6"></path>
                <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                <path d="M3 22v-6h6"></path>
                <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
            </svg>
        );

        const Trophy = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17"></path>
                <path d="M14 14.66V17"></path>
                <path d="M12 2v1"></path>
                <path d="M12 22V17"></path>
                <path d="M12 17a5 5 0 0 0-5-5c0-2.3 1.23-4.33 3.14-5.32L10 6.52l.09-.02c.28-.08.58-.13.89-.13s.6.05.88.13l.09.02L11.86 6.68A6 6 0 0 1 17 12a5 5 0 0 0-5 5Z"></path>
            </svg>
        );

        const ArrowRight = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );

        const Download = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
        );

        // --- í€´ì¦ˆ ë°ì´í„° ---
        const questions = [
            {
                id: 1,
                question: "ë‹¤ìŒ ë‹¨ì–´ì˜ ëœ»ìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€? \n'Library'",
                options: ["ë³‘ì›", "ë„ì„œê´€", "ê²½ì°°ì„œ", "í•™êµ"],
                answer: "ë„ì„œê´€"
            },
            {
                id: 2,
                question: "ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì•Œë§ì€ ë§ì€? \nShe _____ playing soccer now.",
                options: ["is", "are", "am", "do"],
                answer: "is"
            },
            {
                id: 3,
                question: "ë‹¤ìŒ ì¤‘ 'ê³¼ì¼(Fruit)'ì´ ì•„ë‹Œ ê²ƒì€?",
                options: ["Apple", "Banana", "Carrot", "Grape"],
                answer: "Carrot"
            },
            {
                id: 4,
                question: "ë‹¤ìŒ ì§ˆë¬¸ì— ëŒ€í•œ ëŒ€ë‹µìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€? \n'How are you?'",
                options: ["I am a student.", "It is 3 o'clock.", "I'm fine, thank you.", "Yes, I do."],
                answer: "I'm fine, thank you."
            },
            {
                id: 5,
                question: "'Hot'ì˜ ë°˜ëŒ€ë§ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                options: ["Big", "Cold", "Fast", "Happy"],
                answer: "Cold"
            },
            {
                id: 6,
                question: "ê³¼ê±°í˜•ì´ ì˜ëª» ì—°ê²°ëœ ê²ƒì€?",
                options: ["Go - Went", "Eat - Ate", "See - Saw", "Buy - Buyed"],
                answer: "Buy - Buyed"
            },
            {
                id: 7,
                question: "ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì•Œë§ì€ ì „ì¹˜ì‚¬ëŠ”? \nThe cat is _____ the box. (ê³ ì–‘ì´ê°€ ìƒì 'ì•ˆì—' ìˆë‹¤)",
                options: ["on", "in", "under", "next to"],
                answer: "in"
            },
            {
                id: 8,
                question: "ë‹¤ìŒ ë¬¸ì¥ì„ ìš°ë¦¬ë§ë¡œ ë°”ë¥´ê²Œ ì˜®ê¸´ ê²ƒì€? \n'Don't run in the classroom.'",
                options: ["êµì‹¤ì—ì„œ ë›°ì§€ ë§ˆì„¸ìš”.", "êµì‹¤ì—ì„œ ë– ë“¤ì§€ ë§ˆì„¸ìš”.", "êµì‹¤ ì²­ì†Œë¥¼ í•˜ì„¸ìš”.", "êµì‹¤ì— ëŠ¦ì§€ ë§ˆì„¸ìš”."],
                answer: "êµì‹¤ì—ì„œ ë›°ì§€ ë§ˆì„¸ìš”."
            },
            {
                id: 9,
                question: "ë‹¤ìŒ ì¤‘ ì§ì—…(Job)ì´ ì•„ë‹Œ ë‹¨ì–´ëŠ”?",
                options: ["Teacher", "Doctor", "Pilot", "Station"],
                answer: "Station"
            },
            {
                id: 10,
                question: "ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ë§ë¡œ ì•Œë§ì€ ê²ƒì€? \nI want to _____ a pizza.",
                options: ["eat", "eating", "eats", "ate"],
                answer: "eat"
            }
        ];

        // --- ë©”ì¸ App ì»´í¬ë„ŒíŠ¸ ---
        function App() {
            const [gameState, setGameState] = useState('start'); // start, quiz, result
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [score, setScore] = useState(0);
            const [selectedOption, setSelectedOption] = useState(null);
            const [isCorrect, setIsCorrect] = useState(null); // true, false, null
            const [userName, setUserName] = useState('');
            const resultRef = useRef(null); // ê²°ê³¼ í™”ë©´ ìº¡ì²˜ë¥¼ ìœ„í•œ ref

            const handleOptionClick = (option) => {
                if (selectedOption !== null) return;

                const correct = option === questions[currentQuestion].answer;
                setSelectedOption(option);
                setIsCorrect(correct);

                if (correct) {
                    setScore(prev => prev + 10);
                }

                setTimeout(() => {
                    if (currentQuestion < questions.length - 1) {
                        setCurrentQuestion(prev => prev + 1);
                        setSelectedOption(null);
                        setIsCorrect(null);
                    } else {
                        setGameState('result');
                    }
                }, 1500);
            };

            const restartQuiz = () => {
                setGameState('start');
                setCurrentQuestion(0);
                setScore(0);
                setSelectedOption(null);
                setIsCorrect(null);
                setUserName('');
            };

            const handleStartQuiz = () => {
                if (userName.trim() === '') {
                    alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                setGameState('quiz');
            };

            const saveResultImage = async () => {
                if (resultRef.current) {
                    try {
                        const canvas = await html2canvas(resultRef.current, {
                            scale: 2, // í•´ìƒë„ ë†’ì„
                            useCORS: true,
                            backgroundColor: null, // íˆ¬ëª… ë°°ê²½ ë°©ì§€
                        });
                        
                        const image = canvas.toDataURL("image/png");
                        const link = document.createElement('a');
                        link.href = image;
                        // íŒŒì¼ëª…ì— ì‚¬ìš©ì ì´ë¦„ í¬í•¨
                        link.download = `ì˜í€´ì¦ˆê²°ê³¼_${userName}.png`;
                        link.click();
                    } catch (err) {
                        console.error("ì´ë¯¸ì§€ ì €ì¥ ì‹¤íŒ¨:", err);
                        alert("ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                    }
                }
            };

            // ì‹œì‘ í™”ë©´
            if (gameState === 'start') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-blue-100 to-indigo-200 flex items-center justify-center p-4 font-sans">
                        <div className="bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center transform transition-all hover:scale-105 duration-300">
                            <div className="flex justify-center mb-6">
                                <div className="bg-yellow-100 p-4 rounded-full">
                                    <Star size={64} className="text-yellow-500" fill="#eab308" />
                                </div>
                            </div>
                            <h1 className="text-3xl font-bold text-indigo-800 mb-4">ì´ˆë“± ì˜ì–´ í€´ì¦ˆ</h1>
                            <p className="text-gray-600 mb-6 text-lg">
                                ì´ 10ë¬¸ì œì…ë‹ˆë‹¤.<br/>
                                100ì ì— ë„ì „í•´ë³´ì„¸ìš”!
                            </p>
                            
                            <div className="mb-6">
                                <input
                                    type="text"
                                    placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                    value={userName}
                                    onChange={(e) => setUserName(e.target.value)}
                                    className="w-full p-3 border-2 border-gray-300 rounded-xl text-lg text-center focus:outline-none focus:border-indigo-500"
                                    onKeyPress={(e) => e.key === 'Enter' && handleStartQuiz()}
                                />
                            </div>

                            <button 
                                onClick={handleStartQuiz}
                                className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-xl transition-colors shadow-lg flex items-center justify-center gap-2"
                            >
                                í€´ì¦ˆ ì‹œì‘í•˜ê¸° <ArrowRight size={24} />
                            </button>
                        </div>
                    </div>
                );
            }

            // ê²°ê³¼ í™”ë©´
            if (gameState === 'result') {
                let message = "";
                let icon = null;
                
                if (score === 100) {
                    message = "Perfect! ì™„ë²½í•´ìš”!";
                    icon = <Trophy size={80} className="text-yellow-500 mx-auto mb-4" />;
                } else if (score >= 70) {
                    message = "Great Job! ì°¸ ì˜í–ˆì–´ìš”!";
                    icon = <Star size={80} className="text-blue-500 mx-auto mb-4" fill="#3b82f6" />;
                } else {
                    message = "Good Effort! ë‹¤ì‹œ ë„ì „í•´ë´ìš”!";
                    icon = <RefreshCcw size={80} className="text-green-500 mx-auto mb-4" />;
                }

                return (
                    <div className="min-h-screen bg-gradient-to-b from-purple-100 to-pink-200 flex items-center justify-center p-4">
                        <div className="max-w-md w-full">
                            {/* ìº¡ì²˜í•  ì˜ì—­ */}
                            <div ref={resultRef} className="bg-white rounded-2xl shadow-xl p-8 text-center animate-fade-in-up mb-4">
                                {icon}
                                <h2 className="text-2xl font-bold text-gray-800 mb-2">{userName}ë‹˜ì˜ ì ìˆ˜</h2>
                                <h1 className="text-5xl font-extrabold text-indigo-600 mb-2">{score}ì </h1>
                                <p className="text-xl text-gray-600 mb-8 font-medium">{message}</p>
                                <p className="text-sm text-gray-400">ì´ˆë“± ì˜ì–´ í€´ì¦ˆ ê²°ê³¼</p>
                            </div>
                            
                            {/* ë²„íŠ¼ ì˜ì—­ (ìº¡ì²˜ ì œì™¸) */}
                            <div className="space-y-3 animate-fade-in-up" style={{animationDelay: '0.2s'}}>
                                <button 
                                    onClick={saveResultImage}
                                    className="w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold text-lg transition-colors shadow-md flex items-center justify-center gap-2"
                                >
                                    <Download size={20} /> ê²°ê³¼ ì´ë¯¸ì§€ë¡œ ì €ì¥
                                </button>
                                <button 
                                    onClick={restartQuiz}
                                    className="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-lg transition-colors shadow-md flex items-center justify-center gap-2"
                                >
                                    <RefreshCcw size={20} /> ë‹¤ì‹œ í’€ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            // í€´ì¦ˆ í™”ë©´ (ë³€ê²½ ì—†ìŒ)
            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center justify-center p-4">
                    <div className="w-full max-w-lg">
                        {/* í—¤ë” */}
                        <div className="flex justify-between items-center mb-6 px-2">
                            <div className="bg-white px-4 py-2 rounded-full shadow-sm text-indigo-600 font-bold">
                                ë¬¸ì œ {currentQuestion + 1} / {questions.length}
                            </div>
                            <div className="bg-white px-4 py-2 rounded-full shadow-sm text-green-600 font-bold flex items-center gap-2">
                                <Star size={16} fill="#16a34a" className="text-green-600" /> {score}ì 
                            </div>
                        </div>

                        {/* ë¬¸ì œ ì¹´ë“œ */}
                        <div className="bg-white rounded-3xl shadow-lg overflow-hidden mb-6">
                            <div className="bg-indigo-600 p-6 text-white">
                                <h2 className="text-2xl font-bold leading-snug whitespace-pre-line">
                                    {questions[currentQuestion].question}
                                </h2>
                            </div>
                            
                            <div className="p-6 grid gap-3">
                                {questions[currentQuestion].options.map((option, index) => {
                                    let buttonStyle = "bg-gray-50 hover:bg-gray-100 border-2 border-gray-200 text-gray-700";
                                    let icon = null;

                                    if (selectedOption !== null) {
                                        if (option === questions[currentQuestion].answer) {
                                            buttonStyle = "bg-green-100 border-2 border-green-500 text-green-800";
                                            icon = <CheckCircle className="text-green-600 ml-auto" />;
                                        } else if (option === selectedOption) {
                                            buttonStyle = "bg-red-100 border-2 border-red-500 text-red-800";
                                            icon = <XCircle className="text-red-600 ml-auto" />;
                                        } else {
                                            buttonStyle = "bg-gray-50 opacity-50 border-gray-200 text-gray-400";
                                        }
                                    }

                                    return (
                                        <button
                                            key={index}
                                            onClick={() => handleOptionClick(option)}
                                            disabled={selectedOption !== null}
                                            className={`w-full p-4 rounded-xl text-left font-semibold text-lg transition-all flex items-center ${buttonStyle}`}
                                        >
                                            <span className="bg-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shadow-sm mr-3 text-gray-600 border border-gray-200">
                                                {index + 1}
                                            </span>
                                            {option}
                                            {icon}
                                        </button>
                                    );
                                })}
                            </div>

                            {selectedOption && (
                                <div className={`p-4 text-center font-bold text-lg ${isCorrect ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                                    {isCorrect ? "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰" : `ì•„ì‰½ë„¤ìš”. ì •ë‹µì€ '${questions[currentQuestion].answer}' ì…ë‹ˆë‹¤.`}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
